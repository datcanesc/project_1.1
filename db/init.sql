-- 1. Kullanıcı oluşturuluyor
CREATE USER ${SPRING_DATASOURCE_USERNAME} IDENTIFIED BY ${SPRING_DATASOURCE_PASSWORD};

-- 2. Kullanıcıya gerekli yetkiler veriliyor
GRANT CONNECT, RESOURCE, DBA TO ${SPRING_DATASOURCE_USERNAME};

-- 3. Kullanıcıya şemada tüm nesneleri oluşturma yetkisi veriliyor
GRANT CREATE SESSION, CREATE TABLE, CREATE VIEW, CREATE PROCEDURE, CREATE SEQUENCE TO ${SPRING_DATASOURCE_USERNAME};

-- 4. Kullanıcının veritabanındaki şema için limitler belirleniyor
ALTER USER ${SPRING_DATASOURCE_USERNAME} QUOTA UNLIMITED ON USERS;


ALTER SESSION SET CURRENT_SCHEMA = ${SPRING_DATASOURCE_USERNAME};

-- Create table for MAIN_TABLE
CREATE TABLE MAIN_TABLE (
    ID FLOAT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ITEM_NAME VARCHAR2(255) NOT NULL,
    COLUMN1 VARCHAR2(255) NOT NULL,
    TARIH DATE NOT NULL,
    PARAMETER1 VARCHAR2(255) NOT NULL,
    PARAMETER2 VARCHAR2(255) NOT NULL,
    PARAMETER3 VARCHAR2(255) NOT NULL
);

-- Create tables for OZELLIK_1 to OZELLIK_7
CREATE TABLE OZELLIK_1 (
    ID FLOAT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR2(100) NOT NULL
);


CREATE TABLE OZELLIK_2 (
    ID FLOAT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR2(100) NOT NULL
);

CREATE TABLE OZELLIK_3 (
    ID FLOAT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR2(100) NOT NULL
);


CREATE TABLE OZELLIK_4 (
    ID FLOAT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR2(100) NOT NULL
);


CREATE TABLE OZELLIK_5 (
    ID FLOAT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR2(100) NOT NULL
);

CREATE TABLE OZELLIK_6 (
    ID FLOAT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR2(100) NOT NULL
);


CREATE TABLE OZELLIK_7 (
    ID FLOAT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR2(100) NOT NULL
);


-- Create view VW_PARAMETER
CREATE OR REPLACE VIEW VW_PARAMETER AS
SELECT 
    PARAMETER1, 
    PARAMETER2, 
    PARAMETER3 
FROM MAIN_TABLE;


CREATE TABLE TABLE_NAME_LIST (
    ID FLOAT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FIRST_TABLE_NAME VARCHAR2(100) NOT NULL,
    TABLE_NAME VARCHAR2(100) NOT NULL
);


-- Validate data
SELECT * FROM MAIN_TABLE;
SELECT * FROM VW_PARAMETER;
SELECT * FROM OZELLIK_1;
SELECT * FROM OZELLIK_2;
SELECT * FROM OZELLIK_3;
SELECT * FROM OZELLIK_4;
SELECT * FROM OZELLIK_5;
SELECT * FROM OZELLIK_6;
SELECT * FROM OZELLIK_7;


-- DATA INSERT
-- Insert dummy data into MAIN_TABLE
INSERT INTO MAIN_TABLE (ITEM_NAME, COLUMN1, TARIH, PARAMETER1, PARAMETER2, PARAMETER3)
VALUES ('item1', 'Dummy Column1', TO_DATE('2025-01-01', 'YYYY-MM-DD'), 'Param1', 'Param2', 'Param3');

INSERT INTO MAIN_TABLE (ITEM_NAME, COLUMN1, TARIH, PARAMETER1, PARAMETER2, PARAMETER3)
VALUES ('item2', 'Dummy Column1', TO_DATE('2024-01-01', 'YYYY-MM-DD'), 'Param1', 'Param2', 'Param4');

INSERT INTO MAIN_TABLE (ITEM_NAME, COLUMN1, TARIH, PARAMETER1, PARAMETER2, PARAMETER3)
VALUES ('item3', 'Dummy Column1', TO_DATE('2023-01-01', 'YYYY-MM-DD'), 'Param1', 'Param2', 'Param5');

INSERT INTO MAIN_TABLE (ITEM_NAME, COLUMN1, TARIH, PARAMETER1, PARAMETER2, PARAMETER3)
VALUES ('item4', 'Dummy Column1', TO_DATE('2025-01-01', 'YYYY-MM-DD'), 'Param2', 'Param3', 'Param6');

INSERT INTO MAIN_TABLE (ITEM_NAME, COLUMN1, TARIH, PARAMETER1, PARAMETER2, PARAMETER3)
VALUES ('item1', 'Dummy Column1', TO_DATE('2024-01-01', 'YYYY-MM-DD'), 'Param2', 'Param3', 'Param7');

INSERT INTO MAIN_TABLE (ITEM_NAME, COLUMN1, TARIH, PARAMETER1, PARAMETER2, PARAMETER3)
VALUES ('item2', 'Dummy Column1', TO_DATE('2023-01-01', 'YYYY-MM-DD'), 'Param2', 'Param4', 'Param8');

INSERT INTO MAIN_TABLE (ITEM_NAME, COLUMN1, TARIH, PARAMETER1, PARAMETER2, PARAMETER3)
VALUES ('item3', 'Dummy Column1', TO_DATE('2022-01-01', 'YYYY-MM-DD'), 'Param3', 'Param5', 'Param9');

INSERT INTO MAIN_TABLE (ITEM_NAME, COLUMN1, TARIH, PARAMETER1, PARAMETER2, PARAMETER3)
VALUES ('item4', 'Dummy Column1', TO_DATE('2025-01-01', 'YYYY-MM-DD'), 'Param3', 'Param6', 'Param10');


INSERT INTO OZELLIK_1 (NAME) VALUES ('Feature1 for OZELLIK_1');
INSERT INTO OZELLIK_1 (NAME) VALUES ('Feature2 for OZELLIK_1');
INSERT INTO OZELLIK_1 (NAME) VALUES ('Feature3 for OZELLIK_1');
INSERT INTO OZELLIK_1 (NAME) VALUES ('Feature4 for OZELLIK_1');
INSERT INTO OZELLIK_1 (NAME) VALUES ('Feature5 for OZELLIK_1');
INSERT INTO OZELLIK_1 (NAME) VALUES ('Feature6 for OZELLIK_1');

INSERT INTO OZELLIK_2 (NAME) VALUES ('Feature1 for OZELLIK_2');
INSERT INTO OZELLIK_2 (NAME) VALUES ('Feature2 for OZELLIK_2');
INSERT INTO OZELLIK_2 (NAME) VALUES ('Feature3 for OZELLIK_2');
INSERT INTO OZELLIK_2 (NAME) VALUES ('Feature4 for OZELLIK_2');
INSERT INTO OZELLIK_2 (NAME) VALUES ('Feature5 for OZELLIK_2');
INSERT INTO OZELLIK_2 (NAME) VALUES ('Feature6 for OZELLIK_2');

INSERT INTO OZELLIK_3 (NAME) VALUES ('Feature1 for OZELLIK_3');
INSERT INTO OZELLIK_3 (NAME) VALUES ('Feature2 for OZELLIK_3');
INSERT INTO OZELLIK_3 (NAME) VALUES ('Feature3 for OZELLIK_3');
INSERT INTO OZELLIK_3 (NAME) VALUES ('Feature4 for OZELLIK_3');
INSERT INTO OZELLIK_3 (NAME) VALUES ('Feature5 for OZELLIK_3');
INSERT INTO OZELLIK_3 (NAME) VALUES ('Feature6 for OZELLIK_3');

INSERT INTO OZELLIK_4 (NAME) VALUES ('Feature1 for OZELLIK_4');
INSERT INTO OZELLIK_4 (NAME) VALUES ('Feature2 for OZELLIK_4');
INSERT INTO OZELLIK_4 (NAME) VALUES ('Feature3 for OZELLIK_4');
INSERT INTO OZELLIK_4 (NAME) VALUES ('Feature4 for OZELLIK_4');
INSERT INTO OZELLIK_4 (NAME) VALUES ('Feature5 for OZELLIK_4');
INSERT INTO OZELLIK_4 (NAME) VALUES ('Feature6 for OZELLIK_4');

INSERT INTO OZELLIK_5 (NAME) VALUES ('Feature1 for OZELLIK_5');
INSERT INTO OZELLIK_5 (NAME) VALUES ('Feature2 for OZELLIK_5');
INSERT INTO OZELLIK_5 (NAME) VALUES ('Feature3 for OZELLIK_5');
INSERT INTO OZELLIK_5 (NAME) VALUES ('Feature4 for OZELLIK_5');
INSERT INTO OZELLIK_5 (NAME) VALUES ('Feature5 for OZELLIK_5');
INSERT INTO OZELLIK_5 (NAME) VALUES ('Feature6 for OZELLIK_5');

INSERT INTO OZELLIK_6 (NAME) VALUES ('Feature1 for OZELLIK_6');
INSERT INTO OZELLIK_6 (NAME) VALUES ('Feature2 for OZELLIK_6');
INSERT INTO OZELLIK_6 (NAME) VALUES ('Feature3 for OZELLIK_6');
INSERT INTO OZELLIK_6 (NAME) VALUES ('Feature4 for OZELLIK_6');
INSERT INTO OZELLIK_6 (NAME) VALUES ('Feature5 for OZELLIK_6');
INSERT INTO OZELLIK_6 (NAME) VALUES ('Feature6 for OZELLIK_6');

INSERT INTO OZELLIK_7 (NAME) VALUES ('Feature1 for OZELLIK_7');
INSERT INTO OZELLIK_7 (NAME) VALUES ('Feature2 for OZELLIK_7');
INSERT INTO OZELLIK_7 (NAME) VALUES ('Feature3 for OZELLIK_7');
INSERT INTO OZELLIK_7 (NAME) VALUES ('Feature4 for OZELLIK_7');
INSERT INTO OZELLIK_7 (NAME) VALUES ('Feature5 for OZELLIK_7');
INSERT INTO OZELLIK_7 (NAME) VALUES ('Feature6 for OZELLIK_7');